
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="冬日の草原">
    <title>通过网络远程安装 CentOS 7 - 冬日の草原</title>
    <meta name="author" content="Yujiang Bi">
    
        <meta name="keywords" content="c++,mac,hexo,linux,python,physics,quantum,machine learning,">
    
    
        <link rel="icon" href="https://amito.me/images/favicon.ico">
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yujiang Bi","sameAs":["https://github.com/byujiang","https://twitter.com/byujiang","https://facebook.com/byujiang","https://www.linkedin.com/profile/","mailto:byujiang@gmail.com"],"image":"bio.jpg"},"articleBody":"最近工作中需要将几台服务器重装系统, 将 CentOS 6 换成最新的 CentOS 7.5. 于是研究了一下怎么从 grub lagecy 和 grub2 通过网络来升级或安装 CentOS 7.\n\n\n\n从 grub 通过网络安装很容易, 还可以设置 VNC 远程安装. 从 CentOS 6 安装 CentOS 7, 和对 CentOS 7 重装比较类似.\n从 CentOS 6 安装 CentOS 7\n在启动之前, 我们需要下载 vmlinuz 和 initrd.img 到 /boot/netinstall 文件夹下, 如果哦已经无法进入系统, 可以放在一个可以访问的 U 盘上.\nCentOS 6 的启动方式是 grub lagecy, 配置文件是 /boot/grub/grub.conf, 我们需要在启动项开始或结束加入一个新的启动项. 如果已经无法进入系统, 在 grub 没有毁坏的情况下, 在启动选择界面 按 c 进入手动输入模式, 输入以下启动命令.\ntitle CentOS 7 Install\n\troot (hd0,2)\n\tkernel /netinstall/vmlinuz ro ip=192.168.1.10 netmask=255.255.255.254 gateway=192.168.1.1 dns=1.1.1.1 method=http://mirrors.ustc.edu.cn/centos/7/os/x86_64 lang=en_US keymap=us ksdevice=eth0\n\tinitrd /netinstall/initrd.img\n\n其中, ip, netmask, gateway, dns 是网络连接信息, method 是网络安装包位置. 根据需要修改网络信息和安装位置. 根据 /boot 所在位置和所下载文件位置, 修改相应路径. 如果要利用 vnc 通过远程拖动进行安装, 需要在 kernel 语句后面加上 vnc vncpassword=MyPassword 就可以了. 另外, 如果默认网卡 不是 eth0, 比如eno1 的话, 需要在 kernel 命令行加上 ksdevice=eno1\n如果一切没有问题, 之后便会进入图形化安装界面. 如果想自动进行安装, 你可以指定 Kickstart 安装文件. 并在 kernel 语句后面加上文件位置如 ks=http://localfile/centos7.ks, 这样就会自动进行安装了, 当然需要实现准备好 ks 文件.\n从 CentOS 7 重装 CentOS 7\n重装 CentOS 7 的过程与 从 CentOS 6 安装 CentOS 7 类似. CentOS 7 使用的引导器是 grub2, 启动项参数相应有些改变.\nmenuentry \"CentOS-7-Install\"{set root=(hd0,msdos2)\n\tkernel16 /netinstall/vmlinuz ro ip=192.168.1.10::192.168.1.1:255.255.255.254:my_hostname:eth0:none nameserver=1.1.1.1 inst.repo=http://mirrors.ustc.edu.cn/centos/7/os/x86_64/ inst.vnc inst.vncpassword=MyPassword ksdevice=eth0 ks=\"http://where.my.ks.file.is\" inst.lang=en_US inst.keymap=us\n\tinitrd16 /netinstall/initrd.img\n}\n\n其中 ip 的格式为 ip::gateway:netmask:hostname:interface:none, 或者 ip=dhcp. 如果 硬盘是 GPT 格式的, 则需要将 (hd0,msdos2) 改成 (hd0,gpt2), 且要加上 inst.gpt 选项. 同样\n的，需要注意网卡名 interface 和 ksdevice 一定要正确。 之后重启进入 CentOS 7 安装：\ngrub2-reboot CentOS-7-Install\n\n这样重启后一般就会进入自动化安装 CentOS 7 的程序啦.\nKickstart 配置文件\n一般安装好 CentOS 或 Fedora 后, 会在 /root 下有一个 anaconda-ks.cfg, 这就是一个 Kickstart 配置文件, 可以参考这个修改成适合自己的安装脚本。RHEL/CentOS 有一个图形化的配置工具 system-config-kickstart 可以简化 Kickstart 文件的生成配置。\n下面是一个简单的 ks 配置文件。\n#version=DEVEL\n# System authorization information\nauth --enableshadow --passalgo=sha512\n# Use network installation\nurl --url=\"http://mirror.ihep.ac.cn/centos/7/os/x86_64\"\n# Use graphical install\ngraphical\n# Run the Setup Agent on first boot\nfirstboot --enable\nignoredisk --only-use=sda\n# Keyboard layouts\n# old format: keyboard us\n# new format:\nkeyboard --vckeymap=us --xlayouts='us'\n# System language\nlang en_US.UTF-8\n# Network information\nnetwork  --bootproto=static --device=eno1 --gateway=202.122.33.1 --ip=202.122.33.38 --nameserver=202.122.33.44 --netmask=255.255.255.128 --ipv6=auto --activate\nnetwork  --bootproto=dhcp --device=eno2 --onboot=off --ipv6=auto\nnetwork  --bootproto=dhcp --device=eno3 --onboot=off --ipv6=auto\nnetwork  --bootproto=dhcp --device=eno4 --onboot=off --ipv6=auto\nnetwork  --hostname=localhost.localdomain\n# Root password\nrootpw --iscrypted $6$7Xg630Hqe96PUCMu$mUzleXYhsnNBxHl.U1AZTGGVSqJ6U/7n2.psJ8nlXg0.MMFcEjngSAytOZhD8yM52d2s3PF7vpojhiF6s0iT2/\n# System services\nservices --enabled=\"chronyd\"\n# System timezone\ntimezone Asia/Harbin --isUtc\nuser --groups=wheel --name=eos --password=$6$VWhRMFl9A7LKcekg$0zZOGfO2ezcfbGPRLbNVsrzylddEmlsFw5WTkZSa/0Oh5IGxVXvljRAn8O/sSFxdtHKiqioSYXXZpJ/ipqOaA/ --iscrypted --uid=1000 --gecos=\"eos\" --gid=1000\n# System bootloader configuration\nbootloader --append=\" crashkernel=auto\" --location=mbr --boot-drive=sda\n# Partition clearing information\nclearpart --all --initlabel --drives=sda\n# Disk partitioning information\npart /data --fstype=\"ext4\" --ondisk=sda --size=123775 --label=data\npart swap --fstype=\"swap\" --ondisk=sda --size=8191\npart / --fstype=\"ext4\" --ondisk=sda --size=51200 --label=root\npart /var --fstype=\"ext4\" --ondisk=sda --size=102400 --label=var\npart /boot --fstype=\"ext4\" --ondisk=sda --size=500 --label=boot\n%packages\n@^developer-workstation-environment\n@base\n@core\n@debugging\n@desktop-debugging\n@development\n@dial-up\n@directory-client\n@file-server\n@fonts\n@gnome-apps\n@gnome-desktop\n@guest-desktop-agents\n@hardware-monitoring\n@input-methods\n@internet-applications\n@internet-browser\n@java-platform\n@load-balancer\n@mariadb\n@multimedia\n@network-file-system-client\n@performance\n@perl-runtime\n@print-client\n@python-web\n@ruby-runtime\n@system-admin-tools\n@virtualization-client\n@virtualization-hypervisor\n@virtualization-tools\n@web-server\n@x11\nchrony\nkexec-tools\n%end\n%addon com_redhat_kdump --enable --reserve-mb='auto'\n%end\n%anaconda\npwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty\npwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok\npwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty\n%end\n\n需要特别注意的是，安装位置选择硬盘一定要慎重，一定要确定好所选  硬盘  和分区  方案后，才能进行安装，否则容易造成数据丢失。\n\n参考\n\nHow to install CentOS 7 remotely using VNC\nRedhat Enterprise Linux 6 - Installation Guide - BOOT OPTIONS\n\n\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      ","dateCreated":"2018-12-07T22:37:17+08:00","dateModified":"2020-04-13T11:20:25+08:00","datePublished":"2018-12-07T22:37:17+08:00","description":"最近工作中需要将几台服务器重装系统, 将 CentOS 6 换成最新的 CentOS 7.5. 于是研究了一下怎么从 grub lagecy 和 grub2 通过网络来升级或安装 CentOS 7.","headline":"通过网络远程安装 CentOS 7","image":["centos.png"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"},"publisher":{"@type":"Organization","name":"Yujiang Bi","sameAs":["https://github.com/byujiang","https://twitter.com/byujiang","https://facebook.com/byujiang","https://www.linkedin.com/profile/","mailto:byujiang@gmail.com"],"image":"bio.jpg","logo":{"@type":"ImageObject","url":"bio.jpg"}},"url":"https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/","keywords":"Linux, CentOS","thumbnailUrl":"centos.png"}</script>
    <meta name="description" content="最近工作中需要将几台服务器重装系统, 将 CentOS 6 换成最新的 CentOS 7.5. 于是研究了一下怎么从 grub lagecy 和 grub2 通过网络来升级或安装 CentOS 7.">
<meta name="keywords" content="Linux,CentOS">
<meta property="og:type" content="blog">
<meta property="og:title" content="通过网络远程安装 CentOS 7">
<meta property="og:url" content="https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/index.html">
<meta property="og:site_name" content="冬日の草原">
<meta property="og:description" content="最近工作中需要将几台服务器重装系统, 将 CentOS 6 换成最新的 CentOS 7.5. 于是研究了一下怎么从 grub lagecy 和 grub2 通过网络来升级或安装 CentOS 7.">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2020-04-13T03:20:25.721Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="通过网络远程安装 CentOS 7">
<meta name="twitter:description" content="最近工作中需要将几台服务器重装系统, 将 CentOS 6 换成最新的 CentOS 7.5. 于是研究了一下怎么从 grub lagecy 和 grub2 通过网络来升级或安装 CentOS 7.">
<meta name="twitter:creator" content="@byujiang">
    
    
        
            <meta property="fb:admins" content="892874147463767"/>
        
    
    
        <meta property="og:image" content="https://amito.me/images/bio.jpg"/>
    
    
        <meta property="og:image" content="https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/centos.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/centos.png"/>
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-yalgirpqgcg9sfpxxskbm3mqrllvyrmfuscckusel1s0dmattpp8om25rpf1.min.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-46872566-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-46872566-3');
    </script>


    
    
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({
			google_ad_client: "ca-pub-9943170083368654",
			enable_page_level_ads: true
		});
	</script>



    
        
    
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

    <body>
        <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            冬日の草原
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="/images/bio.jpg" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/images/bio.jpg" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">Yujiang Bi</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分类"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="归档"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜索"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="关于"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/byujiang"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/byujiang"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/byujiang"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:byujiang@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="邮箱"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/donate"
                            
                            rel="noopener"
                            title="donate"
                        >
                        <i class="sidebar-button-icon fa fa-heart" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">donate</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/links"
                            
                            rel="noopener"
                            title="links"
                        >
                        <i class="sidebar-button-icon fa fa-link" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">links</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.vultr.com/?ref=6840862"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="vultr"
                        >
                        <i class="sidebar-button-icon fa fa-cloud" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">vultr</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            通过网络远程安装 CentOS 7
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2018-12-07T22:37:17+08:00">
	
		    12月 07, 2018
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/Linux/">Linux</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>最近工作中需要将几台服务器重装系统, 将 CentOS 6 换成最新的 CentOS 7.5. 于是研究了一下怎么从 grub lagecy 和 grub2 通过网络来升级或安装 CentOS 7.</p>
<a id="more"></a>
<hr width="100%" color="#C0C0C0" size="2">
<h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#从 -CentOS-6- 安装 -CentOS-7"><span class="toc-text">从 CentOS 6 安装 CentOS 7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#从 -CentOS-7- 重装 -CentOS-7"><span class="toc-text">从 CentOS 7 重装 CentOS 7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kickstart- 配置文件"><span class="toc-text">Kickstart 配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考"><span class="toc-text">参考</span></a></li></ol>
<p>从 grub 通过网络安装很容易, 还可以设置 VNC 远程安装. 从 CentOS 6 安装 CentOS 7, 和对 CentOS 7 重装比较类似.</p>
<h2 id="从 -CentOS-6- 安装 -CentOS-7">从 CentOS 6 安装 CentOS 7</h2>
<p>在启动之前, 我们需要下载 <a href="http://mirrors.ustc.edu.cn/centos/7/os/x86_64/isolinux/vmlinuz" target="_blank" rel="noopener">vmlinuz</a> 和 <a href="http://mirrors.ustc.edu.cn/centos/7/os/x86_64/isoinux/initrd.img" target="_blank" rel="noopener">initrd.img</a> 到 <code>/boot/netinstall</code> 文件夹下, 如果哦已经无法进入系统, 可以放在一个可以访问的 U 盘上.</p>
<p>CentOS 6 的启动方式是 grub lagecy, 配置文件是 <code>/boot/grub/grub.conf</code>, 我们需要在启动项开始或结束加入一个新的启动项. 如果已经无法进入系统, 在 grub 没有毁坏的情况下, 在启动选择界面 按 c 进入手动输入模式, 输入以下启动命令.</p>
<pre class=" language-language-bash"><code class="language-language-bash">title CentOS 7 Install
	root (hd0,2)
	kernel /netinstall/vmlinuz ro ip=192.168.1.10 netmask=255.255.255.254 gateway=192.168.1.1 dns=1.1.1.1 method=http://mirrors.ustc.edu.cn/centos/7/os/x86_64 lang=en_US keymap=us ksdevice=eth0
	initrd /netinstall/initrd.img
</code></pre>
<p>其中, <code>ip</code>, <code>netmask</code>, <code>gateway</code>, <code>dns</code> 是网络连接信息, <code>method</code> 是网络安装包位置. 根据需要修改网络信息和安装位置. 根据 <code>/boot</code> 所在位置和所下载文件位置, 修改相应路径. 如果要利用 <strong>vnc</strong> 通过远程拖动进行安装, 需要在 <code>kernel</code> 语句后面加上 <code>vnc vncpassword=MyPassword</code> 就可以了. 另外, 如果默认网卡<strong> 不是</strong> <code>eth0</code>, 比如<code>eno1</code> 的话, 需要在 <code>kernel</code> 命令行加上 <code>ksdevice=eno1</code></p>
<p>如果一切没有问题, 之后便会进入图形化安装界面. 如果想自动进行安装, 你可以指定 <code>Kickstart</code> 安装文件. 并在 <code>kernel</code> 语句后面加上文件位置如 <code>ks=http://localfile/centos7.ks</code>, 这样就会自动进行安装了, 当然需要实现准备好 <code>ks</code> 文件.</p>
<h2 id="从 -CentOS-7- 重装 -CentOS-7">从 CentOS 7 重装 CentOS 7</h2>
<p>重装 CentOS 7 的过程与 从 CentOS 6 安装 CentOS 7 类似. CentOS 7 使用的引导器是 <code>grub2</code>, 启动项参数相应有些改变.</p>
<pre class=" language-language-bash"><code class="language-language-bash">menuentry "CentOS-7-Install"{set root=(hd0,msdos2)
	kernel16 /netinstall/vmlinuz ro ip=192.168.1.10::192.168.1.1:255.255.255.254:my_hostname:eth0:none nameserver=1.1.1.1 inst.repo=http://mirrors.ustc.edu.cn/centos/7/os/x86_64/ inst.vnc inst.vncpassword=MyPassword ksdevice=eth0 ks="http://where.my.ks.file.is" inst.lang=en_US inst.keymap=us
	initrd16 /netinstall/initrd.img
}
</code></pre>
<p>其中 <code>ip</code> 的格式为 <code>ip::gateway:netmask:hostname:interface:none</code>, 或者 <code>ip=dhcp</code>. 如果 硬盘是 <code>GPT</code> 格式的, 则需要将 <code>(hd0,msdos2)</code> 改成 <code>(hd0,gpt2)</code>, 且要加上 <code>inst.gpt</code> 选项. 同样<br>
的，需要注意网卡名 <strong>interface</strong> 和 ksdevice 一定要正确。 之后重启进入 CentOS 7 安装：</p>
<pre class=" language-language-bash"><code class="language-language-bash">grub2-reboot CentOS-7-Install
</code></pre>
<p>这样重启后一般就会进入自动化安装 <code>CentOS 7</code> 的程序啦.</p>
<h2 id="Kickstart- 配置文件">Kickstart 配置文件</h2>
<p>一般安装好 <code>CentOS</code> 或 <code>Fedora</code> 后, 会在 <code>/root</code> 下有一个 <code>anaconda-ks.cfg</code>, 这就是一个 <code>Kickstart</code> 配置文件, 可以参考这个修改成适合自己的安装脚本。RHEL/CentOS 有一个图形化的配置工具 <strong>system-config-kickstart</strong> 可以简化 Kickstart 文件的生成配置。</p>
<p>下面是一个简单的 ks 配置文件。</p>
<pre class=" language-language-bash"><code class="language-language-bash">#version=DEVEL
# System authorization information
auth --enableshadow --passalgo=sha512
# Use network installation
url --url="http://mirror.ihep.ac.cn/centos/7/os/x86_64"
# Use graphical install
graphical
# Run the Setup Agent on first boot
firstboot --enable
ignoredisk --only-use=sda
# Keyboard layouts
# old format: keyboard us
# new format:
keyboard --vckeymap=us --xlayouts='us'
# System language
lang en_US.UTF-8
# Network information
network  --bootproto=static --device=eno1 --gateway=202.122.33.1 --ip=202.122.33.38 --nameserver=202.122.33.44 --netmask=255.255.255.128 --ipv6=auto --activate
network  --bootproto=dhcp --device=eno2 --onboot=off --ipv6=auto
network  --bootproto=dhcp --device=eno3 --onboot=off --ipv6=auto
network  --bootproto=dhcp --device=eno4 --onboot=off --ipv6=auto
network  --hostname=localhost.localdomain
# Root password
rootpw --iscrypted $6$7Xg630Hqe96PUCMu$mUzleXYhsnNBxHl.U1AZTGGVSqJ6U/7n2.psJ8nlXg0.MMFcEjngSAytOZhD8yM52d2s3PF7vpojhiF6s0iT2/
# System services
services --enabled="chronyd"
# System timezone
timezone Asia/Harbin --isUtc
user --groups=wheel --name=eos --password=$6$VWhRMFl9A7LKcekg$0zZOGfO2ezcfbGPRLbNVsrzylddEmlsFw5WTkZSa/0Oh5IGxVXvljRAn8O/sSFxdtHKiqioSYXXZpJ/ipqOaA/ --iscrypted --uid=1000 --gecos="eos" --gid=1000
# System bootloader configuration
bootloader --append=" crashkernel=auto" --location=mbr --boot-drive=sda
# Partition clearing information
clearpart --all --initlabel --drives=sda
# Disk partitioning information
part /data --fstype="ext4" --ondisk=sda --size=123775 --label=data
part swap --fstype="swap" --ondisk=sda --size=8191
part / --fstype="ext4" --ondisk=sda --size=51200 --label=root
part /var --fstype="ext4" --ondisk=sda --size=102400 --label=var
part /boot --fstype="ext4" --ondisk=sda --size=500 --label=boot
%packages
@^developer-workstation-environment
@base
@core
@debugging
@desktop-debugging
@development
@dial-up
@directory-client
@file-server
@fonts
@gnome-apps
@gnome-desktop
@guest-desktop-agents
@hardware-monitoring
@input-methods
@internet-applications
@internet-browser
@java-platform
@load-balancer
@mariadb
@multimedia
@network-file-system-client
@performance
@perl-runtime
@print-client
@python-web
@ruby-runtime
@system-admin-tools
@virtualization-client
@virtualization-hypervisor
@virtualization-tools
@web-server
@x11
chrony
kexec-tools
%end
%addon com_redhat_kdump --enable --reserve-mb='auto'
%end
%anaconda
pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty
pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok
pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty
%end
</code></pre>
<p>需要特别注意的是，安装位置选择硬盘一定要慎重，一定要确定好所选 <strong> 硬盘 </strong> 和<strong>分区 </strong> 方案后，才能进行安装，否则容易造成数据丢失。</p>
<hr>
<h2 id="参考">参考</h2>
<ol>
<li><a href="http://www.danpros.com/2016/02/how-to-install-centos-7-remotely-using-vnc" target="_blank" rel="noopener">How to install CentOS 7 remotely using VNC</a></li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/installation_guide/ap-admin-options" target="_blank" rel="noopener">Redhat Enterprise Linux 6 - Installation Guide - BOOT OPTIONS</a></li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            


            <div class="post_reward" style="margin-top:15px;margin-bottom:0px;">
	<label class="reward_btn">Buy Me A Coffee?</label>
	<div class="qr_code">
		<div class="qr_code_img">
			<img class="image" src="/images/wechat.png" style="width:80%;" title="WeChat">
		</div>
		<div class="qr_code_img">
			<img class="image" src="/images/alipay.png" style="width:80%;" title="AliPay">
		</div>
		<div class="qr_code_img">
			<img class="image" src="/images/paypal.png" style="width:80%;" title="PayPal">
		</div>
	</div>
	<hr noshade style="color:rgba(252, 244, 244, 0.952); margin-top:10px;" />
</div>

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/CentOS/">CentOS</a> <a class="tag tag--primary tag--small t-link" href="/tags/Linux/">Linux</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/Ceph-Troubleshooting/"
                    data-tooltip="Ceph 运行中的故障分析与修复"
                    aria-label="上一篇: Ceph 运行中的故障分析与修复"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/Useful-Tools-for-Linux-Operations/"
                    data-tooltip="Linux 运维管理中实的用小工具"
                    aria-label="下一篇: Linux 运维管理中实的用小工具"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                    title="global.share_on_linkedin"
                    aria-label="global.share_on_linkedin"
                >
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Yujiang Bi. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/Ceph-Troubleshooting/"
                    data-tooltip="Ceph 运行中的故障分析与修复"
                    aria-label="上一篇: Ceph 运行中的故障分析与修复"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2018/Useful-Tools-for-Linux-Operations/"
                    data-tooltip="Linux 运维管理中实的用小工具"
                    aria-label="下一篇: Linux 运维管理中实的用小工具"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                    title="global.share_on_linkedin"
                    aria-label="global.share_on_linkedin"
                >
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="2">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                        aria-label="global.share_on_linkedin"
                    >
                        <i class="fab fa-linkedin" aria-hidden="true"></i><span>global.share_on_linkedin</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/"
                        aria-label="分享到 Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/images/bio.jpg" alt="作者的图片"/>
        
            <h4 id="about-card-name">Yujiang Bi</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Beijing, China
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-lwx5xgjnm88yasbplcvsgt04dcgdoesyxbq14mbwldmkbsqdt76ewmiqlzam.min.js"></script>
<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://amito.me/2018/Install-CentOS-7-Remotely-through-Internet/';
              
            this.page.identifier = '2018/Install-CentOS-7-Remotely-through-Internet/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'amito';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
    




    </body>
</html>
